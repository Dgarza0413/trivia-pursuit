<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,900&display=swap" rel="stylesheet">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <title>Document</title>
</head>

<style>
    body {
        font-family: 'Lato', sans-serif;
        background-color: #5C80BC;
        color: white;
    }

    .answer-detail {
        text-align: center;
        margin: 2vh 20vw;
        padding: 10px;
        font-size: 26px;
        border: 3px solid #ffffff;
        border-radius: 25px;
        background-color: #5C80BC;
    }

    .answer-detail:hover {
        transition: .4s ease-out;
        color: #5C80BC;
        background-color: #ffffff;
    }

    #msg-box {
        text-align: center;
    }

    #timer {
        text-align: center;
        margin-top: 10vh;
        font-size: 40px;
    }

    #img-display {
        text-align: center;
        width: 100%;
    }

    #questions-box {
        text-align: center;
        position: absolute;
        bottom: 5vh;
        width: 100%;
    }

    #question {
        margin: 0vh 20vw 15vh 20vw;
        font-size: 36px;
    }
</style>

<body>
    <div id="timer"></div>
    <div id="msg-box"></div>
    <div id="points-box"></div>
    <div id="img-display"></div>
    <div id="questions-box">
        <div id="question"></div>
        <div id="hint"></div>
        <div id="answer-box"></div>
    </div>
</body>
<script>
    // $(document).ready(function () {
    //game mechanics
    var gameOn = false;

    //timing variables
    var intervalId;
    var timerRunning = false;
    var timer = 8;
    var points = 8;
    var totalPoints = 0

    //object variables and indexes
    var questionsCorrect = 0;
    var questionsIncorrect = 0;
    var questionsIndex = 0;
    var arrayIndex = 0

    // use indexOf() to match correct choice to answerChoices

    var questionsList = [{
        question: "What causes the sky to turn blue",
        answerChoices: ["oxygen", "clouds", "ultra violet light", "rayleigh scattering"],
        correctChoice: 4,
        media: "https://images.unsplash.com/photo-1504194067793-7621b2f43e6d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80",
        questionHint: "This is the hint:"
    },
    {
        question: "What is the physical state of Earth's inner core",
        answerChoices: ["liquid", "gas", "solid", "plasma"],
        correctChoice: 3,
        media: "question 2 url",
        questionHint: "This is the hint:"
    },
    {
        question: "Name this monumental location",
        answerChoices: ["easter island", "Tahiti", "Samoa", "Hawaii"],
        correctChoice: 1,
        media: "url",
        questionHint: "This is the hint:"
    }, {
        question: "Name this location",
        answerChoices: ["paris", "london", "berlin", "madrid"],
        correctChoice: 2,
        media: "url",
        questionHint: "This is the hint:"
    },
    ]

    //i will need a function to remove or clear the dom before another set is called
    //this should be different from end game
    startQuestion()
    onClick()

    function timeLimit() {
        if (!timerRunning) {
            timerRunning = true;
            intervalId = setInterval(function () {
                timer--;
                points--
                $("#timer").html(timer)
                if (timer === 0) {
                    timerRunning = false;
                    questionsIncorrect++
                    questionsIndex++
                    $("#timer").remove()
                    $("#msg-box").html("<h1>TIMES UP</h1>")
                    //show some css to show the correct answer
                    if (parseInt($("#answer-detail").attr("answer-index")) === (parseInt(questionsList[questionsIndex].correctChoice)) - 1) {
                        $(this).css("background-color", "red")
                        console.log($(this))
                    }
                }
            }, 1000)
        }
    }

    function startQuestion() {
        if (questionsIndex >= questionsList.length) {
            debugger
            $("#question").remove()
            $("#timer").remove()
            clearInterval(timer)
            console.log("GAME COMPLETE")
            $("#msg-box").html("Game COMplete");
        }

        gameOn = false
        timer = 9;
        generateQuestion()
        generateAnswers()
        timeLimit()

    }

    //create a function to display a timer
    function setTimer() {
        document.getElementById("timer").textContent = timer;
    }

    function clearAnswerDetail() {
        $(".answer-detail").remove()
    }

    //generate question along with picture
    function generateQuestion() {
        // $("#img-display").html("<img src=" + questionsList[questionsIndex].media + " width='400px'>")
        // document.getElementById("img-display").textContent = questionsList[questionsIndex].media;
        document.getElementById("question").textContent = questionsList[questionsIndex].question;
        // document.getElementById("answer-box").textContent = questionsList[questionsIndex].answerChoices;

    }

    //maybe a loop to only generate the answers list
    //do a for loop to generate the questions js or jquery????
    //this loop will fire to generate the answerslist but not select the
    //question
    //added a 
    function generateAnswers() {
        gameOn = true;
        for (var i = 0; i < 4; i++) {
            var answerSelectList = questionsList[questionsIndex].answerChoices[i]
            var correctChoice = questionsList[questionsIndex].correctChoice
            var answerSelect = $("<div>");

            answerSelect.addClass("answer-detail")
            $("#answer-box").append(answerSelect)
            $("#answer-detail").addClass("name")
            $("#answer-detail").attr("answer-select", answerSelectList)
            $("#answer-detail").attr("answer-index", correctChoice)

            answerSelect.attr("answer-select", answerSelectList)
            answerSelect.attr("answer-detail", [i])
            answerSelect.text(answerSelectList)
        }
        onClick()
    }

    function onClick() {
        $(".answer-detail").on("click", function () {
            var correct = questionsList[questionsIndex].correctChoice
            var list = questionsList[questionsIndex].answerChoices
            // if (questionsIndex === questionsList.length) {
            //     // gameOn = false
            //     debugger
            //     console.log("the game is complete")
            //     $("question").remove()
            //     $("msg-box").text("The game is complete")
            // } else if (parseInt($(this).attr("answer-detail")) === (parseInt(correct) - 1)) {
            //     debugger
            //     gameOn = false
            //     questionsIndex++
            //     questionsCorrect++
            //     clearAnswerDetail()
            //     startQuestion()
            // } else {
            //     $(this).slideUp()
            // }

            if (questionsIndex >= questionsList.length) {
                // debugger
                $("#question").remove()
                console.log("GAME COMPLETE")
                $("#msg-box").text("Game COMplete");
            }
            if (parseInt($(this).attr("answer-detail")) === (parseInt(correct) - 1)) {
                console.log("This is the correct answer")
                //increase the questionsIndex
                questionsIndex++
                questionsCorrect++
                clearAnswerDetail()
                // debugger
                startQuestion()
                // startGame()
                // console.log(questionsList[questionsIndex])
                // console.log(questionsList[questionsIndex].correctChoice)
                // console.log(questionsIndex)
                // console.log(questionsCorrect)

                // else if to determine game finished.
            }
            else {
                //i should remove an answer when clicked
                //and/or remove a life
                $(this).slideUp()
            }
        })
    }

    // });

// notes
// line 151
// i should change the to string method structure 
// to an array index location comparison instead
// use indexof to compare input
// UPDATE: line 151 is updated 8:12pm

//line 116
// i am concerned that within the answer generator 
//it throws away the ability to selector items
// i am thinking this is a positioning of the functions 
// that prevents this from happening
// UPDATE: line 116 was solved by placing the onclick in the for loop

//I have two issues i cannot end the game with a game complete
//
//
//second is i cannot properly set up a reset on each question
//should i generate a button to set


    //i need an onclick function to select a partically answer to compare 
    //with the answer
    //a counter to keep track of questions is needed



</script>
<script src="circles.js"></script>

</html>